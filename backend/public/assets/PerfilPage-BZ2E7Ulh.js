import{c as h,s as u,r as x,t as v,v as w,j as e,x as p,U as z,M as f,X as C}from"./index-CjWeqAa0.js";import{u as P,S}from"./uploadFile-BbNSwvBa.js";import{S as j}from"./square-pen-BYxR8_4Y.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],g=h("Briefcase",_);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],N=h("Phone",E);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],y=h("Shield",F),U=()=>{const{user:s,setUser:t}=u(),[n,l]=x.useState(s),[o,d]=x.useState(!1),[a,m]=x.useState(s);return{handleEditToggle:()=>{o&&m(n),d(!o)},handleChange:r=>{const{name:i,value:c}=r.target;m({...a,[i]:c})},handleSubmit:async r=>{r.preventDefault(),l(a);const i=async()=>{try{if(a.file&&a.file instanceof File){const b=await P(a.file,"admins/fotos/");a.file=b}await w(a.id,a),t(a)}catch(c){console.error(c)}finally{d(!1)}};v.promise(i(),{loading:"Actualizando datos...",success:"Datos actualizados",error:"Fall贸 al crear el registro."})},handlePhotoChange:r=>{if(r.target.files&&r.target.files[0]){const i=r.target.files[0],c=URL.createObjectURL(i);t({...s,fotoPreview:c,file:i}),m({...a,file:i}),s.file=c}},isEditing:o,formData:a,userData:n}},R=({handleSubmit:s,formData:t,handlePhotoChange:n,handleChange:l})=>e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col items-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.file||p,alt:t.nombre_completo,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white p-1.5 rounded-full cursor-pointer",children:[e.jsx(j,{size:16}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:n})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center border rounded-md p-2",children:[e.jsx(z,{className:"text-gray-500 mr-2",size:18}),e.jsx("input",{type:"text",name:"nombre_completo",value:t.nombre_completo,onChange:l,className:"flex-1 outline-none",placeholder:"Nombre"})]}),e.jsxs("div",{className:"flex items-center border rounded-md p-2",children:[e.jsx(N,{className:"text-gray-500 mr-2",size:18}),e.jsx("input",{type:"text",name:"celular",value:t.celular,onChange:l,className:"flex-1 outline-none",placeholder:"Celular"})]}),e.jsxs("div",{className:"flex items-center border rounded-md p-2",children:[e.jsx(g,{className:"text-gray-500 mr-2",size:18}),e.jsx("input",{type:"text",name:"ocupacion",value:t.ocupacion,onChange:l,className:"flex-1 outline-none",placeholder:"Ocupaci贸n"})]}),e.jsxs("div",{className:"flex items-center border rounded-md p-2 bg-gray-200",children:[e.jsx(f,{className:"text-gray-500 mr-2",size:18}),e.jsx("input",{type:"email",defaultValue:t.correo,className:"flex-1 outline-none",placeholder:"Correo electr贸nico",disabled:!0})]}),e.jsxs("div",{className:"flex items-center border rounded-md p-2 bg-gray-200",children:[e.jsx(y,{className:"text-gray-500 mr-2",size:18}),e.jsx("input",{type:"text",defaultValue:t.rol,className:"flex-1 outline-none",placeholder:"Rol",disabled:!0})]})]}),e.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 bg-primary text-white py-2 rounded-md hover:bg-primary/90 cursor-pointer",children:[e.jsx(S,{size:18}),"Guardar cambios"]})]}),k=()=>{const{user:s}=u();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("img",{src:s.file||p,alt:s.nombre_completo,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200"}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:s.nombre_completo})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"text-gray-500 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Celular"}),e.jsx("p",{className:"font-medium",children:s.celular})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"text-gray-500 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ocupaci贸n"}),e.jsx("p",{className:"font-medium",children:s.ocupacion})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"text-gray-500 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Correo"}),e.jsx("p",{className:"font-medium",children:s.correo})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"text-gray-500 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Rol"}),e.jsx("p",{className:"font-medium",children:s.rol})]})]})]})]})};function B(){const{handleEditToggle:s,handleSubmit:t,handlePhotoChange:n,handleChange:l,isEditing:o,formData:d,userData:a}=U();return e.jsx("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Perfil del usuario"}),e.jsx("button",{onClick:s,className:"flex items-center gap-1 text-sm font-medium rounded-md px-3 py-1.5 bg-primary text-white hover:bg-primary/90",children:o?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:16}),"Cancelar"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:16}),"Editar"]})})]}),o?e.jsx(R,{handleSubmit:t,handlePhotoChange:n,handleChange:l,formData:d}):e.jsx(k,{userData:a})]})})}export{B as default};
