import{h as c,e as s,u as p,T as h,k as l,d as i,o as m,i as u,f as g,t as y}from"./index-BBEn_SVL.js";import{d as f}from"./dayjs.min-8lXlmZD7.js";const d=i(s,"porristas"),_=i(s,"pagos_porristas"),C=async o=>{try{const a={...o,fecha_registro:h.now()},r=(await l(d,a)).id,t=`${o.nombre} ${o.apellido_p} ${o.apellido_m}`;return await E(r,t),r}catch(a){console.error("Error al agregar porrista:",a)}},b=async o=>m(d,a=>{const e=a.docs.map(r=>({id:r.id,foto:r.data().foto_jugador,...r.data()}));o(e)}),w=async(o,a)=>{try{const e=c(s,"porristas",o);await p(e,a)}catch(e){console.error("Error al actualizar porrista:",e)}},D=async o=>{try{const a=c(s,"porristas",o);await u(a)}catch(a){console.error("Error al eliminar porrista:",a)}},E=async(o,a)=>{const e=f(),r={porristaId:o,nombre:a,pagos:[{tipo:"Inscripción",estatus:"pendiente",fecha_pago:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Coaching",estatus:"pendiente",fecha_pago:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0}],monto_total_pagado:0,monto_total_pendiente:2e3,monto_total:2e3,fecha_registro:e.format("YYYY-MM-DD")};await l(_,r)};let n=null;const I=g((o,a)=>({cheerleader:[],cheerleadersCount:0,loading:!1,getDataCheerleaders:async()=>(o({loading:!0}),new Promise((e,r)=>{try{n?e(a().cheerleader):n=b(t=>{o({cheerleader:t,cheerleadersCount:t.length}),e(t)})}catch(t){console.error(t),r(t)}finally{o({loading:!1})}})),addCheerleader:async e=>{try{await C(e)}catch(r){console.error(r)}},editCheerleader:async e=>{try{await w(e.id,e)}catch(r){console.error(r)}},deleteCheerleader:async e=>{const r=async()=>{try{await D(e)}catch(t){console.error(t)}};y.promise(r(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}}));export{I as u};
