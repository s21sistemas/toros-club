import{f as R,t as u,j as l,r as f}from"./index-BBEn_SVL.js";import{u as p,a as y,I as b}from"./InputField-be6TBco1.js";import{B as h}from"./BaseTable-D3Icrcxb.js";import{B as x,a as v}from"./ButtonsModal-DTPgTePp.js";import{M as j}from"./ModalDelete-Cm4UsPMz.js";import{g as D,r as w,u as M,c as F}from"./roles-D2CXlHPl.js";import{u as C}from"./useModule-Cplu-UJE.js";import{C as E}from"./CancelButtonModal-C7JNYi4q.js";import"./categorias-Dc-bfLah.js";import"./dayjs.min-8lXlmZD7.js";import"./eye-C0bU4jNc.js";import"./chevron-right-AWaKUqHA.js";import"./players-Ctxd4Kou.js";import"./es-CF7lCWqw.js";import"./square-pen-BhYtd8da.js";let g=null;const i=R((r,t)=>({roles:[],loading:!1,getDataRoles:async()=>(r({loading:!0}),new Promise((a,s)=>{try{g?a(t().roles):g=D(e=>{r({roles:e}),a(e)})}catch(e){console.error(e),s(e)}finally{r({loading:!1})}})),addRole:async a=>{const s=async()=>{try{await F(a)}catch(e){throw console.error("Error adding role:",e),e}};u.promise(s(),{loading:"Creando registro...",success:"Registro creado correctamente",error:"Fall贸 al crear el registro."})},editRole:async a=>{const s=async()=>{try{await M(a.id,a)}catch(e){console.error(e)}};u.promise(s(),{loading:"Actualizando...",success:"Actualizado correctamente",error:"Fall贸 al eliminar."})},deleteRole:async a=>{const s=async()=>{try{await w(a)}catch(e){console.error(e)}};u.promise(s(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Fall贸 al eliminar."})}})),B=()=>{const r=p(o=>o.modalType),t=p(o=>o.formData),a=p(o=>o.closeModal),s=i(o=>o.loading),e=i(o=>o.roles),c=i(o=>o.getDataRoles),n=i(o=>o.addRole),d=i(o=>o.editRole),m=i(o=>o.deleteRole);return{roles:e,getDataRoles:c,loading:s,handleSubmit:o=>{o.preventDefault(),r==="add"?n(t):r==="edit"&&d(t),a()},handleDelete:o=>{m(o),a()}}},I={generalFields:[{required:!0,type:"text",label:"Nombre",name:"nombre"},{required:!0,type:"select-normal",label:"Permisos",name:"permisos",opcSelect:[{label:"Consultar",value:"consultar"},{label:"Agregar",value:"agregar"},{label:"Actualizar",value:"actualizar"},{label:"Eliminar",value:"eliminar"},{label:"Cliente",value:"cliente"}]},{required:!0,type:"async-multi",label:"Accesos",name:"accesos"}]},S=()=>{const{view:r,formData:t,handleInputChange:a}=y(),{loadOptions:s}=C();return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:I.generalFields.map(({type:e,label:c,name:n,opcSelect:d,required:m})=>l.jsx(b,{type:e,label:c,name:n,required:m,opcSelect:d,value:t[n]||"",onChange:a,disabled:r,classInput:"md:col-span-6",loadOptions:e==="async"||e==="async-multi"?s:()=>{}},n))}),r?l.jsx(E,{}):l.jsx(x,{})]})},A=[{key:"nombre",name:"Nombre"},{key:"permisos_view",name:"Permisos"},{key:"accesos_view",name:"M贸dulos"}],X=()=>{const{modalType:r,currentItem:t}=y(),{roles:a,loading:s,getDataRoles:e,handleSubmit:c,handleDelete:n}=B();return f.useEffect(()=>{(async()=>await e())()},[e]),l.jsxs("div",{className:"md:p-4 bg-gray-100",children:[l.jsx(h,{columns:A,data:a,title:"Roles",loading:s}),(r==="add"||r==="edit"||r==="view")&&l.jsx(v,{handleSubmit:c,Inputs:l.jsx(S,{})}),r==="delete"&&t&&l.jsx(j,{handleDelete:n})]})};export{X as default};
