import{f as b,t as u,j as r,r as j}from"./index-BBEn_SVL.js";import{B as v,a as I}from"./ButtonsModal-DTPgTePp.js";import{B as D}from"./BaseTable-D3Icrcxb.js";import{M as T}from"./ModalDelete-Cm4UsPMz.js";import{u as x,a as y,I as C}from"./InputField-be6TBco1.js";import{g as F,r as S,u as w,c as M}from"./categorias-Dc-bfLah.js";import{u as O}from"./useTemporadasStore-CRymuaCN.js";import{C as q}from"./CancelButtonModal-C7JNYi4q.js";import{A as B}from"./AlertaCard-Bu43UWrr.js";import{u as N}from"./useReports-Bi6Ecmyh.js";import"./dayjs.min-8lXlmZD7.js";import"./chevron-right-AWaKUqHA.js";import"./players-Ctxd4Kou.js";import"./es-CF7lCWqw.js";import"./square-pen-BhYtd8da.js";import"./eye-C0bU4jNc.js";import"./useBankStore-ZV7bH9rw.js";import"./useProveedorStore-DFg2Ow0D.js";let h=null;const m=b((s,n)=>({categorias:[],loading:!1,getDataCategorias:async()=>(s({loading:!0}),new Promise((a,t)=>{try{h?a(n().categorias):h=F(o=>{s({categorias:o}),a(o)})}catch(o){console.error(o),t(o)}finally{s({loading:!1})}})),addCategoria:async a=>{const t=async()=>{try{await M(a)}catch(o){console.error(o)}};u.promise(t(),{loading:"Creando registro...",success:"Registro creado correctamente",error:"Falló al crear el registro."})},editCategoria:async a=>{const t=async()=>{try{await w(a.id,a)}catch(o){console.error(o)}};u.promise(t(),{loading:"Actualizando...",success:"Actualizado correctamente",error:"Falló al eliminar."})},deleteCategoria:async a=>{const t=async()=>{try{await S(a)}catch(o){console.error(o)}};u.promise(t(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}})),f=()=>{const s=O(e=>e.getDataTemporadas),n=x(e=>e.modalType),a=x(e=>e.formData),t=x(e=>e.closeModal),o=m(e=>e.loading),l=m(e=>e.categorias),i=m(e=>e.getDataCategorias),d=m(e=>e.addCategoria),c=m(e=>e.editCategoria),g=m(e=>e.deleteCategoria);return{categorias:l,loading:o,getDataCategorias:i,handleSubmit:e=>{e.preventDefault();const p={...a,temporada:a.temporadaId.label,temporada_id:a.temporadaId.value};n==="add"?d(p):n==="edit"&&c(p),t()},handleDelete:e=>{g(e),t()},loadOptionsTemporadas:async()=>{try{return(await s()).map(p=>({value:p.id,label:p.temporada}))}catch(e){return console.error("Error loading temporadas:",e),[]}}}},R={generalFields:[{required:!0,type:"async",label:"Selecciona la temporada correspondiente *",name:"temporadaId"},{required:!0,type:"text",label:"Nombre completo de la categoría *",name:"nombre_categoria"},{required:!0,type:"date",label:"Fecha de nacimiento mínima *",name:"fecha_inicio"},{required:!0,type:"date",label:"Fecha de nacimiento máxima *",name:"fecha_fin"},{required:!0,type:"select",label:"Sexo *",name:"sexo",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"hombre",label:"Hombre"},{value:"mujer",label:"Mujer"}]}]},_=()=>{const{view:s,formData:n,handleInputChange:a}=y(),{loadOptionsTemporadas:t}=f();return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:R.generalFields.map(({type:o,label:l,name:i,required:d,opcSelect:c})=>r.jsx(C,{type:o,label:l,name:i,required:d,value:n[i]||"",onChange:a,disabled:s,loadOptions:t,opcSelect:c,classInput:"md:col-span-3"},i))}),s?r.jsx(q,{}):r.jsx(v,{})]})},E=()=>{var i,d,c;const{generarReporteJugadoresTempCat:s,loadOptionsTemporadas:n,formReport:a,handleInputChange:t,categoriaOptions:o}=N(),l=g=>{g.preventDefault(),s(a)};return r.jsxs("form",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 mt-3",onSubmit:l,children:[r.jsx(C,{label:"Temporada",id:"temporadaId",name:"temporadaId",type:"async",required:!0,value:a.temporadaId,onChange:t,loadOptions:n,classInput:["todas",void 0].includes((i=a.temporadaId)==null?void 0:i.value)?"md:col-span-6":"md:col-span-3"}),((d=a.temporadaId)==null?void 0:d.value)!=="todas"&&((c=a.temporadaId)==null?void 0:c.value)!==void 0&&r.jsx(C,{type:"select",label:"Selecciona la categoría",name:"categoria",required:!0,value:a.categoria,opcSelect:o,onChange:t,classInput:"md:col-span-3"}),r.jsx("div",{className:"md:col-span-6 sm:col-span-6",children:r.jsx("button",{className:"rounded-sm text-white font-medium py-2 px-3 bg-[#3674B5] hover:bg-[#486483] transition-all cursor-pointer",children:"Generar reporte"})})]})},k=()=>r.jsxs("div",{className:"mt-6 bg-white p-4 rounded-xl mx-auto",children:[r.jsx(B,{text:"Generar reporte de jugadores por categoría"}),r.jsx(E,{})]}),A=[{key:"temporada",name:"Temporada"},{key:"nombre_categoria",name:"Categoría"},{key:"date_inicio",name:"Fecha de nacimiento mínima"},{key:"date_fin",name:"Fecha de nacimiento máxima"},{key:"sexo",name:"Sexo"}];function ne(){const{modalType:s,currentItem:n}=y(),{categorias:a,loading:t,getDataCategorias:o,handleSubmit:l,handleDelete:i}=f();return j.useEffect(()=>{(async()=>await o())()},[o]),r.jsxs("div",{className:"md:p-4 bg-gray-100",children:[r.jsx(D,{columns:A,data:a,title:"Categorias",loading:t}),(s==="add"||s==="edit"||s==="view")&&r.jsx(I,{handleSubmit:l,Inputs:r.jsx(_,{})}),s==="delete"&&n&&r.jsx(T,{handleDelete:i}),r.jsx(k,{})]})}export{ne as default};
