import{o as l,h as u,e as n,i as m,T as p,E as f,F as d,q as h,d as g,w as t,p as b,k as _}from"./index-BBEn_SVL.js";import{d as i}from"./dayjs.min-8lXlmZD7.js";import{c as y}from"./historial-BrbO5SRO.js";const s=g(n,"caja"),j=d(),w=j.currentUser,I=async o=>{try{const a=await f(w.uid);o.usuarioId={label:a.nombre_completo,value:a.id};const r=h(s,t("jugadorId","==",o.jugadorId),t("concepto","==",o.concepto),t("fecha_pago","==",o.fecha_pago),t("total","==",o.total));return(await b(r)).empty?(await _(s,o)).id:null}catch(a){console.error("Error al agregar registro:",a)}},C=async o=>l(s,a=>{const r=a.docs.map(e=>{var c;return{id:e.id,...e.data(),fecha:i(e.data().fecha_pago).format("DD/MM/YYYY"),usuario:((c=e.data().usuarioId)==null?void 0:c.label)||"",nombre_seccion:`${e.data().nombre} (${e.data().tabla})`}});o(r)}),M=async o=>{try{if(o.entregado==="SI"){const a=u(n,"caja",o.id);await m(a);const r={coordinadora:o.usuario,nombre:`${o.nombre} (${o.tabla})`,concepto:o.concepto,metodo_pago:o.metodo_pago,fecha_pago:o.fecha,monto:o.total,fecha_recibido:i().format("DD/MM/YYYY"),fecha_recibido_filter:p.now()};await y(r)}}catch(a){console.error("Error al eliminar registro:",a)}};export{I as c,C as l,M as r};
