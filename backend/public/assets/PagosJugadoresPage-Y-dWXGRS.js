import{r as ma,j as e}from"./index-BBEn_SVL.js";import{B as _a,a as va}from"./ButtonsModal-DTPgTePp.js";import{B as ja}from"./BaseTable-D3Icrcxb.js";import{M as ya}from"./ModalDelete-Cm4UsPMz.js";import{u as G,a as ha,I as i}from"./InputField-be6TBco1.js";import{u as S}from"./usePaymentPlayerStore-B0gFlDAT.js";import{u as qa}from"./usePlayerStore-BctF7S2Z.js";import{A as q}from"./AlertaCard-Bu43UWrr.js";import{C as xa}from"./CancelButtonModal-C7JNYi4q.js";import{C as H}from"./CardAbonos-Df_3Fd0a.js";import"./dayjs.min-8lXlmZD7.js";import"./chevron-right-AWaKUqHA.js";import"./players-Ctxd4Kou.js";import"./es-CF7lCWqw.js";import"./square-pen-BhYtd8da.js";import"./eye-C0bU4jNc.js";import"./categorias-Dc-bfLah.js";import"./caja-CIBvB7Yt.js";import"./historial-BrbO5SRO.js";import"./calendar-CDh-s6JL.js";const fa=()=>{const n=G(o=>o.modalType),t=G(o=>o.formData),a=G(o=>o.setNestedFormData),y=G(o=>o.closeModal),r=S(o=>o.loading),C=S(o=>o.payments),x=S(o=>o.getDataPaymentsPlayer),P=S(o=>o.addPayment),U=S(o=>o.editPayment),R=S(o=>o.deletePayment),z=qa(o=>o.getDataPlayers);return ma.useEffect(()=>{var o,_,F,T,M,N,E,I,D,A,B,O,s,d,l,v,j,c,u,p,b,g,m,h,f,w,$,k,V,W,X,Y,Z,aa,ea,oa,ta,la,na,sa,da,ra,ia,ca,ua,pa,ba,ga;a("pagos.0.tipo","Inscripción"),a("pagos.1.tipo","Coaching"),a("pagos.2.tipo","Túnel"),a("pagos.3.tipo","Botiquín"),(_=(o=t.pagos)==null?void 0:o[0])!=null&&_.beca||a("pagos.0.beca","0"),(T=(F=t.pagos)==null?void 0:F[0])!=null&&T.descuento||a("pagos.0.descuento","0"),(N=(M=t.pagos)==null?void 0:M[0])!=null&&N.prorroga||a("pagos.0.prorroga","false"),(I=(E=t.pagos)==null?void 0:E[0])!=null&&I.fecha_limite||a("pagos.0.fecha_limite"),(A=(D=t.pagos)==null?void 0:D[0])!=null&&A.total_abonado||a("pagos.0.total_abonado","0"),(O=(B=t.pagos)==null?void 0:B[1])!=null&&O.total_abonado||a("pagos.1.total_abonado","0"),(d=(s=t.pagos)==null?void 0:s[2])!=null&&d.total_abonado||a("pagos.2.total_abonado","0"),(v=(l=t.pagos)==null?void 0:l[3])!=null&&v.total_abonado||a("pagos.3.total_abonado","0"),(c=(j=t.pagos)==null?void 0:j[0])!=null&&c.estatus||a("pagos.0.estatus","pendiente"),(p=(u=t.pagos)==null?void 0:u[1])!=null&&p.estatus||a("pagos.1.estatus","pendiente"),(g=(b=t.pagos)==null?void 0:b[2])!=null&&g.estatus||a("pagos.2.estatus","pendiente"),(h=(m=t.pagos)==null?void 0:m[3])!=null&&h.estatus||a("pagos.3.estatus","pendiente"),(w=(f=t.pagos)==null?void 0:f[0])!=null&&w.fecha_pago||a("pagos.0.fecha_pago",null),(k=($=t.pagos)==null?void 0:$[1])!=null&&k.fecha_pago||a("pagos.1.fecha_pago",null),(W=(V=t.pagos)==null?void 0:V[2])!=null&&W.fecha_pago||a("pagos.2.fecha_pago",null),(Y=(X=t.pagos)==null?void 0:X[3])!=null&&Y.fecha_pago||a("pagos.3.fecha_pago",null),(aa=(Z=t.pagos)==null?void 0:Z[0])!=null&&aa.metodo_pago||a("pagos.0.metodo_pago",null),(oa=(ea=t.pagos)==null?void 0:ea[1])!=null&&oa.metodo_pago||a("pagos.1.metodo_pago",null),(la=(ta=t.pagos)==null?void 0:ta[2])!=null&&la.metodo_pago||a("pagos.2.metodo_pago",null),(sa=(na=t.pagos)==null?void 0:na[3])!=null&&sa.metodo_pago||a("pagos.3.metodo_pago",null),(ra=(da=t.pagos)==null?void 0:da[0])!=null&&ra.total_abonado||a("pagos.0.total_abonado","0"),(ca=(ia=t.pagos)==null?void 0:ia[1])!=null&&ca.total_abonado||a("pagos.1.total_abonado","0"),(pa=(ua=t.pagos)==null?void 0:ua[2])!=null&&pa.total_abonado||a("pagos.2.total_abonado","0"),(ga=(ba=t.pagos)==null?void 0:ba[3])!=null&&ga.total_abonado||a("pagos.3.total_abonado","0")},[t.pagos,a]),{payments:C,getDataPaymentsPlayer:x,loading:r,handleSubmit:async o=>{o.preventDefault();try{n==="add"?await P(t):n==="edit"&&await U(t)}catch(_){console.log(_)}finally{y()}},handleDelete:async o=>{await R(o),y()},loadOptions:async()=>{try{return(await z()).map(_=>({value:_.id,label:`${_.nombre} ${_.apellido_p} ${_.apellido_m}`}))}catch(o){return console.error("Error loading users:",o),[]}}}},J={inscriptionFields:[{required:!0,type:"number",label:"Beca (%) *",name:"beca"},{required:!0,type:"number",label:"Descuento por equipo propio (%) *",name:"descuento"},{required:!0,type:"select",label:"Estatus *",name:"estatus",opcSelect:[{value:"pendiente",label:"Pendiente"},{value:"pagado",label:"Pagado"}]},{required:!0,type:"number",label:"Submonto *",name:"submonto"},{required:!0,type:"number",label:"Monto final *",name:"monto"},{required:!1,type:"select",label:"Método de pago (si no se ha pagado, dejar vacía)",name:"metodo_pago",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}]},{required:!0,type:"select",label:"Prorroga *",name:"prorroga",opcSelect:[{value:"false",label:"No"},{value:"true",label:"Sí"}]},{required:!0,type:"date",label:"Fecha límite de pago *",name:"fecha_limite",condition:n=>n.prorroga==="true"},{required:!1,type:"date",label:"Fecha de pago (si no se ha pagado, dejar vacía)",name:"fecha_pago"},{required:!1,type:"select",label:"¿Abonará? *",name:"abono",opcSelect:[{value:"NO",label:"No"},{value:"SI",label:"Sí"}]},{required:!1,type:"number",label:"Total abonado",name:"total_abonado"}],coachingFields:[{required:!0,type:"select",label:"Estatus *",name:"estatus",opcSelect:[{value:"pendiente",label:"Pendiente"},{value:"pagado",label:"Pagado"}]},{required:!0,type:"number",label:"Monto total *",name:"monto"},{required:!1,type:"date",label:"Fecha del último pago (si no se ha pagado, dejar vacía)",name:"fecha_pago"},{required:!1,type:"select",label:"Método de pago (si no se ha pagado, dejar vacía)",name:"metodo_pago",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}]},{required:!1,type:"select",label:"¿Abonará? *",name:"abono",opcSelect:[{value:"NO",label:"No"},{value:"SI",label:"Sí"}]},{required:!1,type:"number",label:"Total abonado",name:"total_abonado"}],tunelFields:[{required:!0,type:"select",label:"Estatus *",name:"estatus",opcSelect:[{value:"pendiente",label:"Pendiente"},{value:"pagado",label:"Pagado"}]},{required:!0,type:"number",label:"Monto total *",name:"monto"},{required:!1,type:"date",label:"Fecha de pago (si no se ha pagado, dejar vacía)",name:"fecha_pago"},{required:!1,type:"select",label:"Método de pago (si no se ha pagado, dejar vacía)",name:"metodo_pago",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}]},{required:!1,type:"select",label:"¿Abonará? *",name:"abono",opcSelect:[{value:"NO",label:"No"},{value:"SI",label:"Sí"}]},{required:!1,type:"number",label:"Total abonado",name:"total_abonado"}],botiquinFields:[{required:!0,type:"select",label:"Estatus *",name:"estatus",opcSelect:[{value:"pendiente",label:"Pendiente"},{value:"pagado",label:"Pagado"}]},{required:!0,type:"number",label:"Monto total *",name:"monto"},{required:!1,type:"date",label:"Fecha de pago (si no se ha pagado, dejar vacía)",name:"fecha_pago"},{required:!1,type:"select",label:"Método de pago (si no se ha pagado, dejar vacía)",name:"metodo_pago",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}]},{required:!1,type:"select",label:"¿Abonará? *",name:"abono",opcSelect:[{value:"NO",label:"No"},{value:"SI",label:"Sí"}]},{required:!1,type:"number",label:"Total abonado",name:"total_abonado"}],paymentsFields:[{required:!1,type:"number",label:"Total pagado *",name:"monto_total_pagado"},{required:!1,type:"number",label:"Total pendiente *",name:"monto_total_pendiente"},{required:!0,type:"number",label:"Monto Total *",name:"monto_total"}]},Sa=()=>{var x,P,U,R,z,K,L,Q,o,_,F,T,M,N,E,I,D,A,B,O;const{view:n,document:t,formData:a,handleNestedInputChange:y,handleInputChange:r}=ha(),{loadOptions:C}=fa();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:[e.jsx(q,{text:"Jugador"}),e.jsx(i,{type:"async",label:"Selecciona el jugador",name:"jugador",required:!0,value:a.jugador||"",onChange:r,disabled:t?!0:n,loadOptions:C,classInput:"md:col-span-2"}),e.jsx(q,{text:"Pago de inscripción"}),J.inscriptionFields.map(({type:s,label:d,name:l,required:v,opcSelect:j,condition:c,value:u})=>{var p,b,g,m,h,f,w,$,k;return(!c||c(((p=a.pagos)==null?void 0:p[0])||{}))&&e.jsx(i,{type:s,label:d,required:((g=(b=a.pagos)==null?void 0:b[0])==null?void 0:g.estatus)==="pagado"?!0:v,opcSelect:j,name:`pagos.0.${l}`,value:u||(((h=(m=a.pagos)==null?void 0:m[0])==null?void 0:h[l])??""),onChange:y,disabled:["monto","total_abonado"].includes(l)||((w=(f=a.pagos)==null?void 0:f[0])==null?void 0:w.total_abonado)>=((k=($=a.pagos)==null?void 0:$[0])==null?void 0:k.monto)&&l==="abono"?!0:n},l)}),((P=(x=a.pagos)==null?void 0:x[0])==null?void 0:P.abono)==="SI"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"number",label:"Cantidad abonada *",required:!0,name:"cantidad_abono_ins",value:a.cantidad_abono_ins??"",onChange:r,disabled:n}),e.jsx(i,{type:"date",label:"Fecha del abono *",required:!0,name:"fecha_abono_ins",value:a.fecha_abono_ins??"",onChange:r,disabled:n}),e.jsx(i,{type:"select",label:"Método de pago *",required:!0,name:"metodo_pago_abono_ins",value:a.metodo_pago_abono_ins??"",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}],onChange:r,disabled:n})]}),((z=(R=(U=a.pagos)==null?void 0:U[0])==null?void 0:R.abonos)==null?void 0:z.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{text:"Abonos de inscripción"}),a.pagos[0].abonos.map((s,d)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{amount:s.cantidad,date:s.fecha,method:s.metodo},d),e.jsx("hr",{className:"sm:grid-cols-3 gap-2 md:col-span-2"})]}))]}),e.jsx(q,{text:"Pago de Coaching"}),J.coachingFields.map(({type:s,label:d,name:l,required:v,opcSelect:j})=>{var c,u,p,b,g,m,h,f;return e.jsx(i,{type:s,label:d,required:((u=(c=a.pagos)==null?void 0:c[1])==null?void 0:u.estatus)==="pagado"?!0:v,opcSelect:j,name:`pagos.1.${l}`,value:((b=(p=a.pagos)==null?void 0:p[1])==null?void 0:b[l])??"",onChange:y,disabled:["monto","total_abonado"].includes(l)||((m=(g=a.pagos)==null?void 0:g[1])==null?void 0:m.total_abonado)>=((f=(h=a.pagos)==null?void 0:h[1])==null?void 0:f.monto)&&l==="abono"?!0:n},l)}),((L=(K=a.pagos)==null?void 0:K[1])==null?void 0:L.abono)==="SI"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"number",label:"Cantidad abonada *",required:!0,name:"cantidad_abono_coach",value:a.cantidad_abono_coach??"",onChange:r,disabled:n}),e.jsx(i,{type:"date",label:"Fecha del abono *",required:!0,name:"fecha_abono_coach",value:a.fecha_abono_coach??"",onChange:r,disabled:n}),e.jsx(i,{type:"select",label:"Método de pago *",required:!0,name:"metodo_pago_abono_coach",value:a.metodo_pago_abono_coach??"",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}],onChange:r,disabled:n})]}),((_=(o=(Q=a.pagos)==null?void 0:Q[1])==null?void 0:o.abonos)==null?void 0:_.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{text:"Abonos de Coaching"}),a.pagos[1].abonos.map((s,d)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{amount:s.cantidad,date:s.fecha,method:s.metodo},d),e.jsx("hr",{className:"sm:grid-cols-3 gap-2 md:col-span-2"})]}))]}),e.jsx(q,{text:"Pago de Túnel"}),J.tunelFields.map(({type:s,label:d,name:l,required:v,opcSelect:j})=>{var c,u,p,b,g,m,h,f;return e.jsx(i,{type:s,label:d,required:((u=(c=a.pagos)==null?void 0:c[2])==null?void 0:u.estatus)==="pagado"?!0:v,opcSelect:j,name:`pagos.2.${l}`,value:((b=(p=a.pagos)==null?void 0:p[2])==null?void 0:b[l])??"",onChange:y,disabled:["monto","total_abonado"].includes(l)||((m=(g=a.pagos)==null?void 0:g[2])==null?void 0:m.total_abonado)>=((f=(h=a.pagos)==null?void 0:h[2])==null?void 0:f.monto)&&l==="abono"?!0:n},l)}),((T=(F=a.pagos)==null?void 0:F[2])==null?void 0:T.abono)==="SI"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"number",label:"Cantidad abonada *",required:!0,name:"cantidad_abono_tunel",value:a.cantidad_abono_tunel??"",onChange:r,disabled:n}),e.jsx(i,{type:"date",label:"Fecha del abono *",required:!0,name:"fecha_abono_tunel",value:a.fecha_abono_tunel??"",onChange:r,disabled:n}),e.jsx(i,{type:"select",label:"Método de pago *",required:!0,name:"metodo_pago_abono_tunel",value:a.metodo_pago_abono_tunel??"",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}],onChange:r,disabled:n})]}),((E=(N=(M=a.pagos)==null?void 0:M[2])==null?void 0:N.abonos)==null?void 0:E.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{text:"Abonos de túnel"}),a.pagos[2].abonos.map((s,d)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{amount:s.cantidad,date:s.fecha,method:s.metodo},d),e.jsx("hr",{className:"sm:grid-cols-3 gap-2 md:col-span-2"})]}))]}),e.jsx(q,{text:"Pago de Botiquín"}),J.botiquinFields.map(({type:s,label:d,name:l,required:v,opcSelect:j})=>{var c,u,p,b,g,m,h,f;return e.jsx(i,{type:s,label:d,required:((u=(c=a.pagos)==null?void 0:c[3])==null?void 0:u.estatus)==="pagado"?!0:v,opcSelect:j,name:`pagos.3.${l}`,value:((b=(p=a.pagos)==null?void 0:p[3])==null?void 0:b[l])??"",onChange:y,disabled:["monto","total_abonado"].includes(l)||((m=(g=a.pagos)==null?void 0:g[3])==null?void 0:m.total_abonado)>=((f=(h=a.pagos)==null?void 0:h[3])==null?void 0:f.monto)&&l==="abono"?!0:n},l)}),((D=(I=a.pagos)==null?void 0:I[3])==null?void 0:D.abono)==="SI"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"number",label:"Cantidad abonada *",required:!0,name:"cantidad_abono_botiquin",value:a.cantidad_abono_botiquin??"",onChange:r,disabled:n}),e.jsx(i,{type:"date",label:"Fecha del abono *",required:!0,name:"fecha_abono_botiquin",value:a.fecha_abono_botiquin??"",onChange:r,disabled:n}),e.jsx(i,{type:"select",label:"Método de pago *",required:!0,name:"metodo_pago_abono_botiquin",value:a.metodo_pago_abono_botiquin??"",opcSelect:[{value:"",label:"Selecciona una opción"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}],onChange:r,disabled:n})]}),((O=(B=(A=a.pagos)==null?void 0:A[3])==null?void 0:B.abonos)==null?void 0:O.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{text:"Abonos de botiquín"}),a.pagos[3].abonos.map((s,d)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{amount:s.cantidad,date:s.fecha,method:s.metodo},d),e.jsx("hr",{className:"sm:grid-cols-3 gap-2 md:col-span-2"})]}))]}),e.jsx(q,{text:"Pagos"}),J.paymentsFields.map(({type:s,label:d,name:l,required:v,opcSelect:j})=>e.jsx(i,{type:s,label:d,required:v,opcSelect:j,name:l,value:a[l]??"",onChange:y,disabled:l==="monto_total"?!0:n},l))]}),e.jsx("hr",{className:"text-gray-300"}),n?e.jsx(xa,{}):e.jsx(_a,{})]})},Ca=[{key:"inscripcion",name:"Inscripción"},{key:"tunel",name:"Túnel"},{key:"botiquin",name:"Botiquín"},{key:"coacheo",name:"Coaching"},{key:"nombre",name:"Jugador"}];function Ka(){const{modalType:n,currentItem:t}=ha(),{payments:a,loading:y,getDataPaymentsPlayer:r,handleSubmit:C,handleDelete:x}=fa();return ma.useEffect(()=>{(async()=>await r())()},[r]),e.jsxs("div",{className:"md:p-4 bg-gray-100",children:[e.jsx(ja,{columns:Ca,data:a,title:"Pagos de jugadores",loading:y}),(n==="add"||n==="edit"||n==="view")&&e.jsx(va,{handleSubmit:C,Inputs:e.jsx(Sa,{})}),n==="delete"&&t&&e.jsx(ya,{handleDelete:x})]})}export{Ka as default};
