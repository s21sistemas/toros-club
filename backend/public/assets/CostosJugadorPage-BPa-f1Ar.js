import{f as b,t as m,j as s,r as h}from"./index-CjWeqAa0.js";import{B as x,a as D}from"./ButtonsModal-C4PNvLzT.js";import{B as j}from"./BaseTable-DxRxbJEJ.js";import{M as T}from"./ModalDelete-DpY_EDEH.js";import{u as p,a as y,I as q}from"./InputField-C2bV7C3J.js";import{g as F,r as w,u as M,c as v}from"./costos-porrista-9QLCd6eY.js";import{u as I}from"./useTemporadasStore-BdbVkyd2.js";import{C as B}from"./CancelButtonModal-BD6jH3B7.js";import"./dayjs.min-DH9acFiI.js";import"./chevron-right-CCqFvTGw.js";import"./players-FXc4Iomq.js";import"./es-Om7KOudh.js";import"./square-pen-BYxR8_4Y.js";import"./eye-BbsgsaIk.js";import"./categorias-DYCwzMem.js";let C=null;const i=b((r,n)=>({costos:[],loading:!1,getDataCostoJugador:async()=>(r({loading:!0}),new Promise((a,t)=>{try{C?a(n().costos):C=F(e=>{r({costos:e}),a(e)})}catch(e){console.error(e),t(e)}finally{r({loading:!1})}})),addCostoJugador:async a=>{const t=async()=>{try{await v(a)}catch(e){console.error(e)}};m.promise(t(),{loading:"Creando registro...",success:"Registro creado correctamente",error:"Falló al crear el registro."})},editCostoJugador:async a=>{const t=async()=>{try{await M(a.id,a)}catch(e){console.error(e)}};m.promise(t(),{loading:"Actualizando...",success:"Actualizado correctamente",error:"Falló al eliminar."})},deleteCostoJugador:async a=>{const t=async()=>{try{await w(a)}catch(e){console.error(e)}};m.promise(t(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}})),f=()=>{const r=I(o=>o.getDataTemporadas),n=p(o=>o.modalType),a=p(o=>o.formData),t=p(o=>o.closeModal),e=i(o=>o.loading),c=i(o=>o.costos),d=i(o=>o.getDataCostoJugador),l=i(o=>o.addCostoJugador),u=i(o=>o.editCostoJugador),J=i(o=>o.deleteCostoJugador);return{costos:c,loading:e,getDataCostoJugador:d,handleSubmit:o=>{o.preventDefault(),n==="add"?l(a):n==="edit"&&u(a),t()},handleDelete:o=>{J(o),t()},loadOptionsTemporadas:async()=>{try{return(await r()).map(g=>({value:g.id,label:g.temporada}))}catch(o){return console.error("Error loading temporadas:",o),[]}}}},E={generalFields:[{required:!0,type:"async",label:"Temporada *",name:"temporadaId"},{required:!0,type:"number",step:"0.01",label:"Costo de inscripción *",name:"inscripcion"},{required:!0,type:"number",step:"0.01",label:"Costo de coaching *",name:"coaching"},{required:!0,type:"number",step:"0.01",label:"Costo de túnel *",name:"tunel"},{required:!0,type:"number",step:"0.01",label:"Costo de botiquín *",name:"botiquin"}]},S=()=>{const{view:r,formData:n,handleInputChange:a}=y(),{loadOptionsTemporadas:t}=f();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:E.generalFields.map(({type:e,label:c,name:d,required:l,step:u})=>s.jsx(q,{type:e,label:c,name:d,required:l,step:u,value:n[d]||"",onChange:a,disabled:r,loadOptions:t,classInput:"md:col-span-6"},d))}),r?s.jsx(B,{}):s.jsx(x,{})]})},k=[{key:"temporada",name:"Temporada"},{key:"inscripcion",name:"Costo inscripción"},{key:"coaching",name:"Costo coaching"},{key:"tunel",name:"Costo túnel"},{key:"botiquin",name:"Costo botiquín"}];function $(){const{modalType:r,currentItem:n}=y(),{costos:a,loading:t,getDataCostoJugador:e,handleSubmit:c,handleDelete:d}=f();return h.useEffect(()=>{(async()=>await e())()},[e]),s.jsxs("div",{className:"md:p-4 bg-gray-100",children:[s.jsx(j,{columns:k,data:a,title:"Costos de jugador por temporada",loading:t}),(r==="add"||r==="edit"||r==="view")&&s.jsx(D,{handleSubmit:c,Inputs:s.jsx(S,{})}),r==="delete"&&n&&s.jsx(T,{handleDelete:d})]})}export{$ as default};
