import{h as l,e as s,u as m,T as g,k as i,d,o as _,i as b,n as y,q as f,w as h,p as w}from"./index-BBEn_SVL.js";import{d as D}from"./dayjs.min-8lXlmZD7.js";const u=d(s,"jugadores"),j=d(s,"pagos_jugadores"),P=async e=>{try{const a={...e,fecha_registro:g.now()},o=(await i(u,a)).id,n=`${e.nombre} ${e.apellido_p} ${e.apellido_m}`,r=e.temporadaId,c=e.categoria;return await I(o,n,r,c),o}catch(a){console.error("Error al agregar jugador:",a)}},N=async e=>_(u,async a=>{const t=await Promise.all(a.docs.map(async o=>{const n=await p(o.data().uid),r=`${o.data().nombre} ${o.data().apellido_p} ${o.data().apellido_m}`;return{...o.data(),id:o.id,nombre_completo:r,uid:{value:o.data().uid,label:n==null?void 0:n.nombre_completo}}}));e(t)}),R=async e=>{try{const a=l(s,"jugadores",e),t=await y(a);if(t.exists()){const o=t.data(),n=await p(o.uid),r=`${o.nombre} ${o.apellido_p} ${o.apellido_m}`;return{...o,id:t.id,nombre_completo:r,uid:{value:o.uid,label:n==null?void 0:n.nombre_completo}}}else return console.warn("No se encontró el jugador con ese ID"),null}catch(a){return console.error("Error al obtener el jugador:",a),null}},q=async(e,a)=>{try{const t=l(s,"jugadores",e);await m(t,a)}catch(t){console.error("Error al actualizar jugador:",t)}},E=async e=>{try{const a=l(s,"jugadores",e);await b(a)}catch(a){console.error("Error al eliminar jugador:",a)}},p=async e=>{try{const a=d(s,"usuarios"),t=f(a,h("uid","==",e)),o=await w(t);return o.empty?(console.log("No se encontró un usuario con ese ID."),null):o.docs[0].data()}catch(a){return console.error("Error buscando usuario:",a),null}},I=async(e,a,t,o)=>{const n=D(),r=n.add(1,"week").format("YYYY/MM/DD"),c={jugadorId:e,nombre:a,temporadaId:t,categoria:o,pagos:[{tipo:"Inscripción",beca:"0",descuento:"0",estatus:"pendiente",fecha_pago:null,submonto:500,monto:500,prorroga:!1,fecha_limite:r,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Coaching",estatus:"pendiente",fecha_pago:null,fecha_limite:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Túnel",estatus:"pendiente",fecha_pago:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Botiquín",estatus:"pendiente",fecha_pago:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0}],monto_total_pagado:0,monto_total_pendiente:2e3,monto_total:2e3,fecha_registro:n.format("YYYY-MM-DD")};await i(j,c)};export{R as a,P as c,N as g,E as r,q as u};
