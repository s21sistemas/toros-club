import{f as h,t as p,j as e,r as b}from"./index-CjWeqAa0.js";import{B as x,a as D}from"./ButtonsModal-C4PNvLzT.js";import{B as j}from"./BaseTable-DxRxbJEJ.js";import{M as T}from"./ModalDelete-DpY_EDEH.js";import{u,a as y,I as F}from"./InputField-C2bV7C3J.js";import{a as w,b as M,d as v,e as I}from"./costos-porrista-9QLCd6eY.js";import{u as B}from"./useTemporadasStore-BdbVkyd2.js";import{C as E}from"./CancelButtonModal-BD6jH3B7.js";import"./dayjs.min-DH9acFiI.js";import"./chevron-right-CCqFvTGw.js";import"./players-FXc4Iomq.js";import"./es-Om7KOudh.js";import"./square-pen-BYxR8_4Y.js";import"./eye-BbsgsaIk.js";import"./categorias-DYCwzMem.js";let C=null;const c=h((r,i)=>({costos:[],loading:!1,getDataCostoPorrista:async()=>(r({loading:!0}),new Promise((a,t)=>{try{C?a(i().costos):C=w(s=>{r({costos:s}),a(s)})}catch(s){console.error(s),t(s)}finally{r({loading:!1})}})),addCostoPorrista:async a=>{const t=async()=>{try{await I(a)}catch(s){console.error(s)}};p.promise(t(),{loading:"Creando registro...",success:"Registro creado correctamente",error:"Falló al crear el registro."})},editCostoPorrista:async a=>{const t=async()=>{try{await v(a.id,a)}catch(s){console.error(s)}};p.promise(t(),{loading:"Actualizando...",success:"Actualizado correctamente",error:"Falló al eliminar."})},deleteCostoPorrista:async a=>{const t=async()=>{try{await M(a)}catch(s){console.error(s)}};p.promise(t(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}})),P=()=>{const r=B(o=>o.getDataTemporadas),i=u(o=>o.modalType),a=u(o=>o.formData),t=u(o=>o.closeModal),s=c(o=>o.loading),l=c(o=>o.costos),n=c(o=>o.getDataCostoPorrista),d=c(o=>o.addCostoPorrista),m=c(o=>o.editCostoPorrista),f=c(o=>o.deleteCostoPorrista);return{costos:l,loading:s,getDataCostoPorrista:n,handleSubmit:o=>{o.preventDefault(),i==="add"?d(a):i==="edit"&&m(a),t()},handleDelete:o=>{f(o),t()},loadOptionsTemporadas:async()=>{try{return(await r()).map(g=>({value:g.id,label:g.temporada}))}catch(o){return console.error("Error loading temporadas:",o),[]}}}},S={generalFields:[{required:!0,type:"async",label:"Temporada *",name:"temporadaId"},{required:!0,type:"number",step:"0.01",label:"Costo de inscripción *",name:"inscripcion"},{required:!0,type:"number",step:"0.01",label:"Costo de coaching *",name:"coaching"}]},O=()=>{const{view:r,formData:i,handleInputChange:a}=y(),{loadOptionsTemporadas:t}=P();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:S.generalFields.map(({type:s,label:l,name:n,required:d,step:m})=>e.jsx(F,{type:s,label:l,name:n,required:d,step:m,value:i[n]||"",onChange:a,disabled:r,loadOptions:t,classInput:"md:col-span-6"},n))}),r?e.jsx(E,{}):e.jsx(x,{})]})},k=[{key:"temporada",name:"Temporada"},{key:"inscripcion",name:"Costo de inscripción"},{key:"coaching",name:"Costo de coaching"}];function $(){const{modalType:r,currentItem:i}=y(),{costos:a,loading:t,getDataCostoPorrista:s,handleSubmit:l,handleDelete:n}=P();return b.useEffect(()=>{(async()=>await s())()},[s]),e.jsxs("div",{className:"md:p-4 bg-gray-100",children:[e.jsx(j,{columns:k,data:a,title:"Costos de porristas por temporada",loading:t}),(r==="add"||r==="edit"||r==="view")&&e.jsx(D,{handleSubmit:l,Inputs:e.jsx(O,{})}),r==="delete"&&i&&e.jsx(T,{handleDelete:n})]})}export{$ as default};
